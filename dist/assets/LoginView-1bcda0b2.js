import{_ as y,u as I,r,o as l,c as i,w as v,v as w,a as t,b as h,d as L,p as V,e as k,f,g as C,h as E,i as b,R as N}from"./index-c2348cb1.js";const p=s=>(V("data-v-d95ada02"),s=s(),k(),s),U=p(()=>t("label",{for:"email"},"Email:",-1)),B={key:0,class:"textValidation"},P=p(()=>t("label",{for:"password"},"Password:",-1)),T={key:1,class:"textValidation"},$=p(()=>t("button",{type:"submit",class:"button"},"Login",-1)),R={__name:"LoginComponent",setup(s){const _=I(),{setUserId:m,setUserName:S}=_,c=r(),u=r(),a=r(!0),d=r(!0);async function x(g){g.preventDefault();const o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c.value,password:u.value})};try{const e=await fetch(`${{}.VITE_API_URL}/user/login`,o);if(!e.ok)throw console.log(e.status),e.status===401&&(a.value=!1),e.status===402&&(a.value=!0,d.value=!1),new Error("Error al loguear, LoginComponent");const n=await e.json();a.value=!0,d.value=!0,localStorage.removeItem("token"),localStorage.removeItem("id"),localStorage.setItem("token",n.token),localStorage.setItem("id",n.user._id),S(n.user.name),m(n.user._id),L.push("/")}catch(e){console.log("Error Login",e)}}return(g,o)=>(l(),i("form",{onSubmit:x},[U,v(t("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>c.value=e),type:"email",id:"email",placeholder:"Enter your email",autocomplete:"email",required:""},null,512),[[w,c.value]]),a.value?h("",!0):(l(),i("p",B,"Email doesn't match")),P,v(t("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>u.value=e),type:"password",id:"password",placeholder:"Enter your password",autocomplete:"current-password",required:""},null,512),[[w,u.value]]),d.value?h("",!0):(l(),i("p",T,"Password doesn't match")),$],32))}},j=y(R,[["__scopeId","data-v-d95ada02"]]);const q={class:"contentBox"},D={class:"loginContentBox"},O={__name:"LoginView",setup(s){return(_,m)=>(l(),i("div",q,[t("div",D,[f(j,{class:"loginComp"}),f(E(N),{id:"toSignup",to:"/signup",class:"signupLink"},{default:C(()=>[b("Create your account")]),_:1})])]))}},F=y(O,[["__scopeId","data-v-6c5ec38d"]]);export{F as default};
